// components/TradingContestCards.tsx
import React from "react";

type Contest = {
  title: string;
  id: string;
  start: { month: string; day: string; time: string };
  end: { month: string; day: string; time: string };
  totalPrizeText: string;
  tradersValue: string;
  entryFeeValue: string;
  countdown: { d: string; h: string; m: string; s: string };
  badge: { value: string; unit: string; variant: "circle" | "square" };
};

function ArrowIcon(props: React.SVGProps<SVGSVGElement>) {
  return (
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" {...props}>
      <path
        d="M10 7l6 5-6 5"
        stroke="currentColor"
        strokeWidth="2.5"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    </svg>
  );
}

function TrophyIcon(props: React.SVGProps<SVGSVGElement>) {
  return (
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" {...props}>
      <path
        d="M7 4h10v3a5 5 0 0 1-10 0V4Z"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinejoin="round"
      />
      <path
        d="M7 7H5a2 2 0 0 0 2 2"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M17 7h2a2 2 0 0 1-2 2"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M12 12v3"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M9 21h6"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M10 15h4v2a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2Z"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinejoin="round"
      />
    </svg>
  );
}

function UsersIcon(props: React.SVGProps<SVGSVGElement>) {
  return (
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" {...props}>
      <path
        d="M16 19c0-2.2-1.8-4-4-4s-4 1.8-4 4"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M12 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"
        stroke="currentColor"
        strokeWidth="2"
      />
      <path
        d="M20 19c0-1.7-1-3.1-2.5-3.7"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M17.5 11.3A3 3 0 1 0 16 5.2"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
    </svg>
  );
}

function TicketCoinIcon(props: React.SVGProps<SVGSVGElement>) {
  return (
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" {...props}>
      <path
        d="M4 8a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1a2 2 0 0 0 0 4v1a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-1a2 2 0 0 0 0-4V8Z"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinejoin="round"
      />
      <path
        d="M19 8.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z"
        stroke="currentColor"
        strokeWidth="2"
      />
      <path
        d="M19 10.6v2.8"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
    </svg>
  );
}

function PlayIcon(props: React.SVGProps<SVGSVGElement>) {
  return (
    <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" {...props}>
      <path d="M10 8l7 4-7 4V8Z" fill="currentColor" />
    </svg>
  );
}

function TimeBox({
  label,
  month,
  day,
  time,
}: {
  label: string;
  month: string;
  day: string;
  time: string;
}) {
  return (
    <div className="pill-shadow soft-border flex overflow-hidden rounded-[14px] bg-[#0d1030]">
      <div className="px-4 py-3">
        <div className="text-[12px] font-semibold tracking-[.18em] text-white/45">
          {month}
        </div>
        <div className="mt-[2px] text-[30px] font-semibold leading-[1] text-white/92">
          {day}
        </div>
      </div>
      <div className="w-px bg-white/10" />
      <div className="px-4 py-3">
        <div className="text-[14px] font-medium text-white/45">{label}</div>
        <div className="mt-[2px] text-[30px] font-semibold leading-[1] text-white/92">
          {time}
        </div>
      </div>
    </div>
  );
}

function CountdownPill({ value }: { value: string }) {
  return (
    <div className="pill-shadow soft-border rounded-[10px] bg-[#221b2f] px-4 py-2 text-[18px] font-semibold text-[#ff6478]">
      {value}
    </div>
  );
}

function Badge({
  value,
  unit,
  variant,
}: {
  value: string;
  unit: string;
  variant: "circle" | "square";
}) {
  if (variant === "square") {
    return (
      <div className="relative grid h-14 w-14 place-items-center rounded-[10px] soft-border bg-[#0d1030]">
        <div className="text-[26px] font-semibold text-white/92 leading-[1]">
          {value}
        </div>
        <div className="-mt-1 text-[14px] font-semibold text-white/55 leading-[1]">
          {unit}
        </div>
        <span className="absolute left-2 top-2 h-[5px] w-[5px] rounded-sm bg-white/70" />
        <span className="absolute right-2 top-2 h-[5px] w-[5px] rounded-sm bg-white/70" />
      </div>
    );
  }

  const ticks = Array.from({ length: 12 }, (_, i) => i * 30);

  return (
    <div className="relative grid h-14 w-14 place-items-center rounded-full soft-border bg-[#0d1030]">
      <div className="text-[26px] font-semibold text-white/92 leading-[1]">
        {value}
      </div>
      <div className="-mt-1 text-[14px] font-semibold text-white/55 leading-[1]">
        {unit}
      </div>

      <div className="pointer-events-none absolute inset-0">
        {ticks.map((deg) => (
          <span
            key={deg}
            className="absolute left-1/2 top-1/2 h-[6px] w-[2px] rounded bg-white/60"
            style={{
              transform: `translate(-50%,-50%) rotate(${deg}deg) translateY(-22px)`,
            }}
          />
        ))}
      </div>
    </div>
  );
}

function ContestCard({ contest }: { contest: Contest }) {
  return (
    <section className="card-glow soft-border rounded-[26px] bg-gradient-to-b from-[#151a3d] to-[#0f1330] px-5 py-6 sm:px-7 sm:py-7">
      <div className="flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between lg:gap-10">
        {/* LEFT */}
        <div className="min-w-0">
          <div className="text-[38px] sm:text-[46px] font-semibold tracking-tight text-white/95 leading-[1]">
            {contest.title}
          </div>
          <div className="mt-1 text-[20px] sm:text-[24px] font-medium tracking-wide text-white/35">
            {contest.id}
          </div>

          {/* time row */}
          <div className="mt-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:gap-4">
            <TimeBox
              label="Start"
              month={contest.start.month}
              day={contest.start.day}
              time={contest.start.time}
            />

            <ArrowIcon className="hidden h-7 w-7 text-white/25 sm:block" />
            <div className="hidden h-px w-full bg-white/10 sm:hidden" />

            <TimeBox
              label="End"
              month={contest.end.month}
              day={contest.end.day}
              time={contest.end.time}
            />
          </div>

          {/* prize */}
          <div className="mt-7 flex items-center gap-4">
            <div className="pill-shadow soft-border grid h-12 w-12 place-items-center rounded-[14px] bg-[#0d1030]">
              <TrophyIcon className="h-7 w-7 text-[#f4c44f]" />
            </div>
            <div>
              <div className="text-[18px] sm:text-[20px] font-medium text-white/45 leading-[1.05]">
                Total prize
              </div>
              <div className="mt-1 text-[26px] sm:text-[28px] font-semibold text-white/92 leading-[1.05]">
                {contest.totalPrizeText}
              </div>
            </div>
          </div>

          {/* divider */}
          <div className="mt-7 h-px w-full bg-white/10" />

          {/* bottom row */}
          <div className="mt-5 flex flex-col gap-5 sm:flex-row sm:items-center sm:gap-12">
            <div className="flex items-center gap-4">
              <div className="pill-shadow soft-border grid h-12 w-12 place-items-center rounded-[14px] bg-[#0d1030]">
                <UsersIcon className="h-7 w-7 text-white/45" />
              </div>
              <div>
                <div className="text-[22px] font-semibold text-white/70 leading-[1]">
                  {contest.tradersValue}
                </div>
                <div className="mt-1 text-[18px] font-medium text-white/35 leading-[1]">
                  Traders
                </div>
              </div>
            </div>

            <div className="flex items-center gap-4">
              <div className="pill-shadow soft-border grid h-12 w-12 place-items-center rounded-[14px] bg-[#0d1030]">
                <TicketCoinIcon className="h-7 w-7 text-[#7a7cff]" />
              </div>
              <div>
                <div className="text-[22px] font-semibold text-white/92 leading-[1]">
                  {contest.entryFeeValue}
                </div>
                <div className="mt-1 text-[18px] font-medium text-white/35 leading-[1]">
                  Entry fee
                </div>
              </div>
            </div>
          </div>
        </div>

        {/* RIGHT */}
        <div className="shrink-0 lg:text-right">
          {/* top icons row */}
          <div className="flex items-center justify-between gap-4 lg:justify-end">
            <Badge
              value={contest.badge.value}
              unit={contest.badge.unit}
              variant={contest.badge.variant}
            />
            <div className="grid h-12 w-12 place-items-center rounded-[14px] soft-border bg-[#0d1030]">
              <PlayIcon className="h-7 w-7 text-white/70" />
            </div>
          </div>

          <div className="mt-5 text-[24px] sm:text-[28px] font-medium text-white/35 lg:text-right">
            Starts in
          </div>

          <div className="mt-3 flex flex-wrap items-center gap-2 lg:justify-end">
            <CountdownPill value={`${contest.countdown.d}d`} />
            <div className="text-white/25 text-[18px] font-semibold">:</div>
            <CountdownPill value={`${contest.countdown.h}h`} />
            <div className="text-white/25 text-[18px] font-semibold">:</div>
            <CountdownPill value={`${contest.countdown.m}m`} />
            <div className="text-white/25 text-[18px] font-semibold">:</div>
            <CountdownPill value={`${contest.countdown.s}s`} />
          </div>

          <button
            className="join-shadow mt-5 w-full sm:w-[190px] rounded-[14px] bg-[#20d0f2] py-4 text-[34px] sm:text-[36px] font-semibold text-[#061027] active:scale-[0.99]"
            type="button"
          >
            Join
          </button>
        </div>
      </div>
    </section>
  );
}

export default function TradingContestCards() {
  const contests: Contest[] = [
    {
      title: "Crypto",
      id: "ID85513",
      start: { month: "DEC", day: "29", time: "02:30" },
      end: { month: "DEC", day: "29", time: "06:30" },
      totalPrizeText: "No prize",
      tradersValue: "-",
      entryFeeValue: "$5.00",
      countdown: { d: "0", h: "21", m: "54", s: "34" },
      badge: { value: "4", unit: "H", variant: "circle" },
    },
    {
      title: "Forex",
      id: "ID85478",
      start: { month: "DEC", day: "29", time: "02:30" },
      end: { month: "DEC", day: "30", time: "01:20" },
      totalPrizeText: "No prize",
      tradersValue: "-",
      entryFeeValue: "$5.00",
      countdown: { d: "0", h: "21", m: "54", s: "34" },
      badge: { value: "1", unit: "D", variant: "square" },
    },
  ];

  return (
    <div className="min-h-screen bg-[#070b23] px-4 py-8 sm:px-6 sm:py-10">
      {/* local styles (same as html preview) */}
      <style jsx global>{`
        .card-glow {
          box-shadow: 0 22px 70px rgba(0, 0, 0, 0.45),
            inset 0 1px 0 rgba(255, 255, 255, 0.06);
        }
        .soft-border {
          border: 1px solid rgba(255, 255, 255, 0.06);
        }
        .pill-shadow {
          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }
        .join-shadow {
          box-shadow: 0 18px 40px rgba(28, 208, 242, 0.18),
            inset 0 1px 0 rgba(255, 255, 255, 0.25);
        }
      `}</style>

      <div className="mx-auto flex max-w-[1120px] flex-col gap-7">
        {contests.map((c) => (
          <ContestCard key={c.id} contest={c} />
        ))}
      </div>
    </div>
  );
}